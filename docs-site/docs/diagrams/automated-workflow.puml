@startuml
skinparam backgroundColor #FFFFFF
skinparam swimlaneWidth 320

|知財担当者|
start
:特許権者リストを入力;

|自動化システム\n(Next.js + Vercel)|
:特許情報を自動取得;
note right
  **データソース**
  ・J-PlatPat API
  ・特許庁データベース
  ・特許公報
end note

:請求項を自動抽出・構造化;
:侵害調査エージェントを起動;

|AI Agent 1:\n侵害可能性分析|
:Web検索による製品調査;
:構成要件マッチング分析;
:充足性判断レポート生成;
note right
  **自動実行内容**
  ・製品仕様の自動収集
  ・構成要件の自動マッピング
  ・充足性の自動判定
  ・根拠URLの自動記録
end note

|自動化システム\n(Next.js + Vercel)|
if (侵害可能性あり?) then (○)
  :売上推定エージェントを起動;
else (×)
  :結果をSupabaseに保存;
  |知財担当者|
  :結果を確認;
  stop
endif

|AI Agent 2:\n売上推定分析|
:企業・製品情報を収集;
:市場規模・シェア分析;
:売上・収益性レポート生成;
note right
  **自動実行内容**
  ・企業財務情報の収集
  ・製品売上の推定
  ・市場シェアの分析
  ・収益ランクの自動判定
end note

|自動化システム\n(Next.js + Vercel)|
:DD管理シートを自動更新;
:通知を送信;

|知財担当者|
:ダッシュボードで確認;
note right
  **確認内容**
  ・優先度ランク順の表示
  ・侵害可能性の詳細
  ・収益見込みの可視化
  ・分析根拠へのリンク
end note

:総合的に判断;

if (訴訟すべきか?) then (Yes)
  :訴訟準備開始;
  |自動化システム\n(Next.js + Vercel)|
  :ステータス更新（訴訟準備中）;
  :履歴をSupabaseに記録;
  stop
else (No)
  :終了;
  |自動化システム\n(Next.js + Vercel)|
  :ステータス更新（却下/保留）;
  :履歴をSupabaseに記録;
  stop
endif

@enduml
