# mise configuration for Terraform infrastructure
# https://mise.jdx.dev/

[tools]
terraform = "1.9.8"
node = "20.18.0"  # For Lambda@Edge development

[tasks.init]
description = "Initialize Terraform"
run = "cd environments/dev && terraform init"

[tasks.plan]
description = "Run Terraform plan"
run = "cd environments/dev && terraform plan"

[tasks.apply]
description = "Apply Terraform changes"
run = "cd environments/dev && terraform apply"

[tasks.destroy]
description = "Destroy Terraform resources"
run = "cd environments/dev && terraform destroy"

[tasks.validate]
description = "Validate Terraform configuration"
run = "cd environments/dev && terraform validate"

[tasks.fmt]
description = "Format Terraform files"
run = "terraform fmt -recursive ."

[tasks.fmt-check]
description = "Check Terraform formatting"
run = "terraform fmt -check -recursive ."

[tasks.lambda-install]
description = "Install Lambda@Edge dependencies"
run = "cd modules/docusaurus/lambda && npm install"
